*** List of deadlocks ***
 
db2 "SELECT 
DISTINCT(A.APPLICATION_HANDLE), 
A.MEMBER AS PARTITION, 
SUBSTR(B.TABSCHEMA, 1, 30) AS TABSCHEMA, 
SUBSTR(B.TABNAME, 1, 30) AS TABNAME, 
SUBSTR(A.DEADLOCKS,1,10) AS DEADLOCKS 
FROM 
TABLE(MON_GET_CONNECTION(NULL, -1)) AS A, 
SYSIBMADM.LOCKS_HELD B WHERE A.APPLICATION_HANDLE = B.AGENT_ID AND B.TABSCHEMA NOT LIKE 'SYS%' WITH UR"
 
db2 "SELECT 
DISTINCT(A.APPLICATION_HANDLE), 
A.MEMBER AS PARTITION, 
SUBSTR(B.TABSCHEMA, 1, 30) AS TABSCHEMA, 
SUBSTR(B.TABNAME, 1, 30) AS TABNAME, 
SUBSTR(A.DEADLOCKS,1,10) AS DEADLOCKS 
FROM 
TABLE(MON_GET_CONNECTION(NULL, -1)) AS A, 
SYSIBMADM.LOCKS_HELD B WHERE A.APPLICATION_HANDLE = B.AGENT_ID AND B.TABSCHEMA NOT LIKE 'SYS%' AND A.DEADLOCKS > 0 WITH UR"
 
 
db2 "SELECT 
A.APPLICATION_HANDLE, 
B.STMT_TEXT 
FROM 
TABLE(MON_GET_CONNECTION(NULL, -1)) AS A,  
SYSIBMADM.SNAPSTMT B 
WHERE 
A.APPLICATION_HANDLE = B.AGENT_ID AND  
B.STMT_TEXT <> '-' WITH UR"